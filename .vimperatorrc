" Start Loading "{{{1
echo "Vimperator Loading..."

" Main Settings "{{{1
set wildoptions=auto
set complete=sl
set nextpattern=^次(へ|の|ペ),^続き,\bnext\b,^>$,^(>>|&#187;)$,^(>|&#187;),(>|&#187;)$,\bmore\b
set previouspattern=^前(へ|の|ペ),^戻る,\bprev|previous\b,^<$,^(<<|&#171;)$,^(<|&#171;),(<|&#171;)$
set focuscontent
set ignorecase
set guioptions=r
set visualbell
hi Bell display:none;
"set editor=meadow
set editor=gvim

" Visual "{{{1
" http://vimperator.g.hatena.ne.jp/teramako/20100307/1267955731
colorscheme persona
" http://coderepos.org/share/browser/lang/javascript/vimperator-plugins/trunk/colors/sweets_snaka.vimp
colorscheme sweets_snaka

"" 補完リスト
hi CompResult width: 600px; max-width: 600px; display: inline-block; overflow: hidden; font-size: 10pt; font-family: Menlo, Consolas, Monaco, monospace; " 結果欄（左側）
hi CompDesc width: 600px; font-size: 10pt; font-family: Menlo, Consolas, Monaco, monospace; " 説明欄（右側）

"" フィードアイコンをステータスバーに表示
javascript <<EOF
(function(){
    var feedPanel = document.createElement("statusbarpanel");
    feedPanel.setAttribute("id", "feed-panel-clone");
    feedPanel.appendChild(document.getElementById("feed-button"));
    feedPanel.firstChild.setAttribute("style", "padding: 0; max-height: 16px;");
    document.getElementById("status-bar")
            .insertBefore(feedPanel, document.getElementById("security-button"));
})();
EOF
" Key mapping "{{{1
"yank region
map y :echo 'Yank!'<CR>Y
"j/kの移動量増加
map j 8<C-e>
map k 8<C-y>
"J/K h/lでタブ移動
map h <C-p>
map l <C-n>
map K <C-p>
map J <C-n>
"restart firefox
map <M-r> :restart<CR>
" Hatena Bookmark Search
map B :hbs<Space>
" Wikipedia
map W :open wikipedia<Space>
" JavaScript
map ,j :javascript<Space>
map ,J :open javascript:

" Command {{{1
" calendar
:command cal :js liberator.echo(<datepicker type="grid" xmlns={XUL}/>)
" コマンドラインでime off
:style -name comandline-ime chrome://* #liberator-commandline-command input {ime-mode: inactive;}

" 特定のページに対する設定 {{{1
" Vimperatorを無効にするページ {{{2
" リストにないページではVimperatorを復帰する
autocmd LocationChange .* js modes.passAllKeys = false
" Smart.fmのフラッシュページ
autocmd LocationChange smart\\.fm/(study|flash) js modes.passAllKeys = true

" Plugin "{{{1

" feeder.js "{{{2

" twitter.js "{{{2

" copy.js "{{{2
javascript <<EOM
liberator.globalVariables.copy_templates = [
{ label: 'titleAndtinyurl',value: 'TITLE and TinyURL', custom: function(){ return buffer.title + ' - ' +  util.httpGet('http://tinyurl.com/api-create.php?url=' + encodeURIComponent(buffer.URL)).responseText; } },
];
EOM

map ,t :tw<Space>
map ,l :copy<Space>titleAndtinyurl<CR>:tw<Space>Browsing: <S-Insert>
map ,u :copy<Space>%URL%<CR>
map ,c :copy<Space>%TITLE% %URL%<CR>

" feedSomeKeys_3.js "{{{2 
command! -nargs=+ lazy autocmd VimperatorEnter .* <args>
lazy fmaps -u='mail\.google\.com/mail' c / j k n p o u e x s r a # [ ] ? gi gs gt gd ga gc
lazy fmaps -u='mail\.google\.com/mail/.*/[0-9a-f]+$' c / j,n k,p n,j p,k o u e x s r a # [ ] ? gi gs gt gd ga gc
lazy fmaps -u='www\.google\.co\.jp/reader' -events=vkeypress j k n p m s v A r S N P X O gh ga gs gt gu u / ? J K
lazy fmaps -u='(fastladder|livedoor)\.com/reader' j k s a p o v c i,p <Space> <S-Space> z b < > q w e,g
lazy fmaps -u='https?://www\.rememberthemilk\.com/home/' j k m i c t ? d F,f G,g S,s L,l Y,y H,h M,m <Del> <C-S-Left> <C-S-Right>
lazy fmaps -u='http://code.google.com/p/vimperator-labs/issues/list' o j k
lazy fmaps -u='http://code.google.com/p/vimperator-labs/issues/detail' u

" _smooziee.js "{{{2 http://coderepos.org/share/browser/lang/javascript/vimperator-plugins/trunk/_smooziee.js
let g:smooziee_scroll_amount="150"
let g:smooziee_scroll_interval="30"
" Addon "{{{1
" Hatena Bookmark "{{{2 'http://b.hatena.ne.jp/guide/firefox_addon'
javascript if (typeof hBookmark != 'undefined') liberator.loadScript('chrome://hatenabookmark/content/vimperator/plugin/hatenabookmark.js', {__proto__: this}); 

" Finish Loading "{{{1
echo "Loading done! :-)" 

" __END__ "{{{1
" vim: set filetype=vim :
